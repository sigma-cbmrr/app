function verificarRedirecionamento(user) {
    const uid = user.uid;
    db.collection('usuarios').doc(uid).get().then((doc) => {
        if (doc.exists) {
            // USUÁRIO JÁ EXISTE: Redireciona para o dashboard
            window.location.href = "/app/sigma_dashboard.html";
        } else {
            // NOVO USUÁRIO: Mostra tela de cadastro
            console.log("Usuário novo detectado. Exibindo tela de cadastro."); // LINHA DE DEBUG
            iniciarCadastro(user);
            return; // Garante que a execução para aqui
        }
    }).catch((error) => {
        console.error("Erro ao verificar dados do usuário:", error);
        alert("Erro de conexão. Tente novamente.");
        resetBotoes();
    });
}
